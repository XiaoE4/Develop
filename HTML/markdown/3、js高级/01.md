# JavaScript高级

# ajax

## 1.认识

```javascript
//1. 创建XHR
let xhr = new XMLHttpRequest( )
console.log(xhr)

// 2.配置open，规定请求（请求方式，请求地址，同步和异步(true&false)）
// localhost 本机域名 127.0.0.1 本机ip (live server)
// 请求方式：GET和POST：
/*
与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。
然而，在以下情况中，请使用 POST 请求：
    1. 不愿使用缓存文件（更新服务器上的文件或数据库）
    2. 向服务器发送大量数据（POST 没有数据量限制）
    3. 发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠
*/
xhr.open("GET","输入请求的地址",true&false)
//true表示异步
//false表示同步

//3. send	将请求发送到服务器
xhr.send()

// 4.接收数据，注册一个事件
xhr.onreadystatechange= fn1=>{
    console.;og("xhr.readyState")
    if(xhr.readyState === 4 && xhr.status=== 200){
        console.log("解析完成",xhr.responseText)
    }  else if(xhr.readyState ===4 && xhr.status ===404){
		console.log("没有找到")
        //location.href="404.html"
    }
}
xhr.onload =fn2=>{
	console.log("onload",xhr.readyState)	
    if(xhr.status===200){
                console.log(JSON.parse(xhr.responseText));
            }else if (xhr.status===404){
                console.error("not found")
            }
}
```



## 2.请求方式

form get post

- ajax

  get 偏向获取数据

  post 偏向提交数据

  put	偏向更新（全部）	{name:"xiaoE",age:100}

  delete 偏向删除信息

  patch	偏向部分修改

  - header


  - option
  - connect

- nodejs使用

  `npm install json-server -g`		//终端下载json-server

  `json-server` -基于一个json文件就可以创建很多的后端模拟接口

  问题：系统禁止运行脚本，npm fund，清除缓存。

  正常使用：右键终端运行，输入`json-server .\test1.json --watch`

  - 端口占用：

    输入：`netstat -ano` 查看端口

    在cmd 输入 `taskkill /f /t /im` 对应的 TCP 号（最后面的一串数字），来关掉被占用的端口，之后再次运行使用。

  ​

